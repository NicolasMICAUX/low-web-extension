<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Image test page</title>
  <link rel="stylesheet" type="text/css" href="./style.css">
</head>
<body>

  <h1>Images</h1>

  <section>

    <h2>Srcset</h2>
    <figure>
      <figcaption>
        <b>Image with native srcset</b><br>
        Not working :( images are already loading when extension update srcset.
      </figcaption>
      <img class="half" src="./images/image1.png" srcset="./images/image1.png 400w, ./images/image2.png 800w, ./images/image3.png 1600w" sizes="100vw" width="400" height="200" />
    </figure>

    <hr />

    <figure>
      <figcaption>
        <b>Lazy-loaded image with data-srcset</b><br>
        Should display 1 or 2 (not 3, image3.png should not be loaded).
      </figcaption>
      <img class="half" data-src="./images/image1.png" data-srcset="./images/image1.png 400w, ./images/image2.png 800w, ./images/image3.png 1600w" sizes="100vw" width="400" height="200" />
    </figure>

    <hr />

    <p>
      <b>Image (picture+source) with retina native srcset</b><br>
      Not working :( images are already loading when extension update srcset.
    </p>
    <picture>
      <source srcset="./images/image1.png 1x, ./images/image2.png 2x, ./images/image3.png 4x" />
      <img src="./images/image1.png" class="half" width="400" height="200" />
    </picture>

    <hr />
    
    <p>
      Image (picture+source) with dataset and retina srcset
    </p>
    <picture>
      <source data-srcset="./images/image1.png 1x, ./images/image2.png 2x, ./images/image3.png 4x" sizes="100vw" class="half" width="400" height="200" />
      <img data-src="./images/image1.png" alt="Bar" class="half" width="400" height="200" />
    </picture>

    <hr /> 
   

    <p>
      <b>Image (picture+source) with mediaqueries srcset</b><br>
      Not working yet. Should display 1 or 2 (not 3, image3.png should not be loaded).
    </p>
    <picture>
      <source media="(min-width: 1024px)" srcset="./images/image1.png 400w, ./images/image2.png 800w, ./images/image3.png 1600w" sizes="100vw" />
      <img src="./images/image1.png" alt="Bar" class="half" width="400" height="200" />
    </picture>

  </section>

  <section>

    <h2>Gif</h2>
    
    <p>
      <b>Native &lt;img&gt; element</b><br>
      Gif should not be animated. Animation only plays when mouse is over.
    </p>

    <img src="images/frog.gif" width="480" height="264" />

  </section>

  <section>

    <h2>Giphy</h2>

    <p>
      <b>Gif &lt;img&gt; from GIPHY</b><br>
      Animated Gif should not be loaded and animated. Only a static preview is loaded. Animation only loads and plays when mouse is over.
    </p>

    <img src="https://media.giphy.com/media/gHWegg7yI1qOjTmpqN/giphy.gif" width="776" height="436" />
    <img src="https://media.giphy.com/media/gJuTwM3yuQ8f3rE8KV/giphy.gif" width="480" height="480" />

    <p>
      <b>Gif &lt;iframe&gt; from GIPHY</b><br>
      Animated Gif should not be loaded and animated. Only a static preview is loaded. Animation only loads and plays when mouse is over.
    </p>
 
    <iframe src="https://giphy.com/embed/lcjv1V5ypsG3djVqg4" width="480" height="480" frameBorder="0" class="giphy-embed" allowFullScreen></iframe>

  </section>

  <section>

    <h2>Avatar</h2>

    <p>
      Avatar images should be blocked, replaced by a 1x1 black gif (loaded from local)
    </p>
    <img src="https://www.gravatar.com/avatar/6365dbfa6be95764fa9edde1e233ae60" width="32" height="32" />
    <img src="https://secure.gravatar.com/avatar/6365dbfa6be95764fa9edde1e233ae60" width="32" height="32" />
    <img src="https://a.disquscdn.com/1568930115/images/noavatar92.png" width="32" height="32" />
    <img src="https://c.disquscdn.com/uploads/users/29408/8062/avatar92.jpg" width="32" height="32" />
    
  </section>
  
  <script type="text/javascript">
    window.addEventListener("DOMContentLoaded", (event) => {
      var images = document.querySelectorAll('img[data-src]')
      for( var i = 0, lg = images.length; i<lg; i++ ){
        images[i].srcset = images[i].dataset.srcset
        images[i].src = images[i].dataset.src
      }
    });
  </script>
</body>
</html>